server {
    listen 80;
    rewrite        ^ https://$host$request_uri? permanent;
}

server {
    listen 443 default ssl;
    ssl_certificate <%= node[:ipynb][:ssl_certificate] %>;
    ssl_certificate_key <%= node[:ipynb][:ssl_certificate_key] %>;

    error_log <%= File.join(node[:nginx][:log_dir],'error.log') %>;

    location / {
      proxy_pass http://localhost:<%= node[:ipynb][:NotebookApp][:port] %>;
      proxy_set_header Host $host;
      proxy_buffering off;
   }
}
